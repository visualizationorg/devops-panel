"use strict";(self.webpackChunkdevops_ultimate_panel_react=self.webpackChunkdevops_ultimate_panel_react||[]).push([[952],{6952:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(37762),a=n(74165),c=n(15861),s=n(29439),o=n(72791),i=n(50649),u=n.n(i),l=n(5896),p=n(89731),d=n(42434),h=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.ZP.get("".concat("https://dev.azure.com","/").concat((0,d.su)(d.I.ORGANIZATION,""),"/").concat(t,"/_apis/git/repositories?api-version=7.1-preview.1"));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0.data));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t,n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.ZP.get("".concat("https://dev.azure.com","/").concat((0,d.su)(d.I.ORGANIZATION,""),"/").concat(t,"/_apis/git/repositories/").concat(n,"/commits?api-version=7.1-preview.1"));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0.data));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),f=n(18553),v=n(4349),x=n(72426),w=n.n(x),g=n(80184);function j(){var e=(0,o.useState)(!0),t=(0,s.Z)(e,2),n=(t[0],t[1]),p=(0,o.useState)(null),d=(0,s.Z)(p,2),x=d[0],j=d[1],Z=(0,o.useState)([]),b=(0,s.Z)(Z,2),k=b[0],C=b[1],I=(0,o.useState)([]),P=(0,s.Z)(I,2),N=P[0],A=P[1];(0,o.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,f.M2)();case 3:t=e.sent,C(t.data.value),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching projects:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,o.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,c,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],c=(0,r.Z)(k),e.prev=2,o=(0,a.Z)().mark((function e(){var n,c,o,i,u;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,e.prev=1,e.next=4,h(n.name);case 4:c=e.sent,o=(0,r.Z)(c.data.value),e.prev=6,u=(0,a.Z)().mark((function e(){var r,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.value,e.next=3,m(n.name,r.id);case 3:0===(c=e.sent).data.value.length?j("No commits found"):c.data.value.forEach((function(e){t.push({id:e.commitId,projectName:n.name,repoName:r.name,author:e.author.name,date:e.author.date,message:e.comment})}));case 5:case"end":return e.stop()}}),e)})),o.s();case 9:if((i=o.n()).done){e.next=13;break}return e.delegateYield(u(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),o.e(e.t1);case 18:return e.prev=18,o.f(),e.finish(18);case 21:e.next=27;break;case 23:e.prev=23,e.t2=e.catch(1),console.error("Error fetching commits for project ".concat(n.name,":"),e.t2),j("Error fetching commits for project ".concat(n.name));case 27:case"end":return e.stop()}}),e,null,[[1,23],[6,15,18,21]])})),c.s();case 5:if((s=c.n()).done){e.next=9;break}return e.delegateYield(o(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),c.e(e.t1);case 14:return e.prev=14,c.f(),e.finish(14);case 17:A(t),n(!1);case 19:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})));return function(){return e.apply(this,arguments)}}();k.length>0&&e()}),[k]);return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(l.Z,{content:!1,title:(0,g.jsx)(v.Z,{id:"repo-list"}),children:x?(0,g.jsxs)("div",{style:{padding:"20px",textAlign:"center",color:"red"},children:[(0,g.jsx)("h3",{children:"Hata"}),(0,g.jsx)("p",{children:x})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h1",{children:"Last Commits Across Organization"}),(0,g.jsx)("div",{style:{width:"100%"},children:(0,g.jsxs)(u(),{dataSource:N,showBorders:!0,allowColumnReordering:!0,allowColumnResizing:!0,columnAutoWidth:!0,showRowLines:!0,showColumnLines:!0,rowAlternationEnabled:!0,hoverStateEnabled:!0,height:600,width:"100%",children:[(0,g.jsx)(i.Grouping,{autoExpandAll:!0}),(0,g.jsx)(i.GroupPanel,{visible:!0}),(0,g.jsx)(i.Paging,{defaultPageSize:50}),(0,g.jsx)(i.Pager,{showPageSizeSelector:!0,allowedPageSizes:[25,50,100],showInfo:!0}),(0,g.jsxs)(i.Toolbar,{children:[(0,g.jsx)(i.Item,{name:"groupPanel"}),(0,g.jsx)(i.Item,{name:"exportButton"}),(0,g.jsx)(i.Item,{name:"columnChooserButton"})]}),(0,g.jsx)(i.Column,{dataField:"projectName",caption:"Project Name",width:150,groupIndex:0}),(0,g.jsx)(i.Column,{dataField:"repoName",caption:"Repository Name",width:150}),(0,g.jsx)(i.Column,{dataField:"author",caption:"Author",width:150}),(0,g.jsx)(i.Column,{dataField:"date",caption:"Date",width:200,cellRender:function(e){return e.value?w()(e.value).format("LLL"):""}}),(0,g.jsx)(i.Column,{dataField:"id",caption:"Commit ID",width:120,cellRender:function(e){return(0,g.jsx)("span",{style:{fontFamily:"monospace",cursor:"pointer"},title:e.value,children:e.value?e.value.substring(0,10):""})},alignment:"center"}),(0,g.jsx)(i.Column,{dataField:"message",caption:"Message",width:300})]})})]})})})}}}]);
//# sourceMappingURL=952.1571395a.chunk.js.map